"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[848],{5848:(Y,_,a)=>{a.r(_),a.d(_,{GameModule:()=>$});var m=a(8583),p=a(3735);function v(n,s,e,o,i,u,l){try{var g=n[u](l),r=g.value}catch(V){return void e(V)}g.done?s(r):Promise.resolve(r).then(o,i)}function d(n){return function(){var s=this,e=arguments;return new Promise(function(o,i){var u=n.apply(s,e);function l(r){v(u,o,i,l,g,"next",r)}function g(r){v(u,o,i,l,g,"throw",r)}l(void 0)})}}var c=a(7238),y=a(7865),h=a(9456),k=a(906),t=a(7716),M=a(6767),S=a(4220),x=a(9565),f=a(5447);let b=(()=>{class n{constructor(e){this.sounds=e,this.volumeLevel=1,this.muteOption="Mute"}volumeUp(){this.sounds.volumeUp(),this.volumeLevel+=1}volumeDown(){this.sounds.volumeDown(),this.volumeLevel-=1}volumeMute(){this.sounds.volumeMute(),this.muteOption=this.sounds.isMuted?"Unmute":"Mute"}playSelectSound(){this.sounds.playSelectSound()}playHoverSound(){this.sounds.playHoverSound()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-volume-control"]],decls:9,vars:2,consts:[[1,"volume-control-container"],[3,"click","mouseover"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.volumeDown(),o.playSelectSound()})("mouseover",function(){return o.playHoverSound()}),t._uU(4,"Volume Down"),t.qZA(),t.TgZ(5,"button",1),t.NdJ("click",function(){return o.volumeUp(),o.playSelectSound()})("mouseover",function(){return o.playHoverSound()}),t._uU(6,"Volume Up"),t.qZA(),t.TgZ(7,"button",1),t.NdJ("click",function(){return o.volumeMute(),o.playSelectSound()})("mouseover",function(){return o.playHoverSound()}),t._uU(8),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("Volume: ",o.volumeLevel,""),t.xp6(6),t.Oqu(o.muteOption))},styles:[".volume-control-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:30px;border-radius:15px;border:solid 1px black;font-family:inherit;font-size:20px;padding:0 10px;text-align:center;margin-left:12px;background-color:#fff}button[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}button[_ngcontent-%COMP%]:active{transform:scale(1.1)}p[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:20px;height:30px;width:100px;background:black;color:#fff;border-radius:15px;border:solid 1px black}"]}),n})(),T=(()=>{class n{constructor(e){this.sounds=e,this.songName=""}ngOnInit(){this.songName=this.sounds.songTitle}nextFightSong(){this.sounds.nextFightSong(),this.songName=this.sounds.songTitle}previousFightSong(){this.sounds.previousFightSong(),this.songName=this.sounds.songTitle}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-music-selector"]],decls:6,vars:1,consts:[[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.previousFightSong()}),t._uU(3,"Previous"),t.qZA(),t.TgZ(4,"button",0),t.NdJ("click",function(){return o.nextFightSong()}),t._uU(5,"Next"),t.qZA()),2&e&&(t.xp6(1),t.hij("Song: ",o.songName,""))},styles:["p[_ngcontent-%COMP%]{font-size:20px;background-color:#fff;width:200px}"]}),n})();const C=function(n){return{"background-color":n}};function A(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"div",20),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(3,C,e.healthBarColor(t.lcZ(2,1,e.pLeft$).health)))}}function w(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"div",20),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(3,C,e.healthBarColor(t.lcZ(2,1,e.pRight$).health)))}}function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.makeReady("pLeft"),i.playMoveSelect()}),t._uU(1,"Ready For War?"),t.qZA()}}function P(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pLeft","rock"),i.playMoveSelect()}),t._uU(2,"Rock"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pLeft","paper"),i.playMoveSelect()}),t._uU(4,"Paper"),t.qZA(),t.TgZ(5,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pLeft","scissors"),i.playMoveSelect()}),t._uU(6,"Scissors"),t.qZA(),t.qZA()}}function I(n,s){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,O,2,0,"button",22),t.YNc(2,P,7,0,"div",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.gameState.isStarted),t.xp6(1),t.Q6J("ngIf",e.gameState.isStarted)}}function R(n,s){1&n&&(t.TgZ(0,"div",21),t._UZ(1,"img",25),t.qZA())}function U(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.makeReady("pRight"),i.playMoveSelect()}),t._uU(1,"Ready For War?"),t.qZA()}}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pRight","rock"),i.playMoveSelect()}),t._uU(2,"Rock"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pRight","paper"),i.playMoveSelect()}),t._uU(4,"Paper"),t.qZA(),t.TgZ(5,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.select("pRight","scissors"),i.playMoveSelect()}),t._uU(6,"Scissors"),t.qZA(),t.qZA()}}function L(n,s){if(1&n&&(t.TgZ(0,"div",26),t.YNc(1,U,2,0,"button",22),t.YNc(2,G,7,0,"div",23),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.gameState.isStarted),t.xp6(1),t.Q6J("ngIf",e.gameState.isStarted)}}function N(n,s){1&n&&(t.TgZ(0,"div",26),t._UZ(1,"img",25),t.qZA())}const Z=function(){return[]};let F=(()=>{class n{constructor(e,o,i,u,l){this.socketService=e,this.store=o,this.route=i,this.navigation=u,this.sounds=l,this.pLeft$=null,this.pRight$=null,this.loggedInUsername=void 0,this.fightImgShowing=!1,this.drawImgString=null,this.drawImgShowing=!1,this.fatalityImgShowing=!1,this.vsComputer=!1,this.backgroundString=this.getBackground(),this.store.select(y.P4).subscribe(r=>this.loggedInUsername=null==r?void 0:r.username),this.store.select(h.Mi).subscribe(r=>{this.gameState=r,this.runChecks()}),console.log(this.gameState),this.pLeft$=this.store.select(h.FE),this.pRight$=this.store.select(h.fK)}ngOnInit(){this.sounds.stopMenuMusic(),this.sounds.randomizeSong(),this.sounds.playFightMusic()}ngOnDestroy(){this.sounds.stopFightMusic(),this.sounds.resetHitSoundVolume(),this.sounds.resetVolumeMute(),this.sounds.resetDrawSoundVolume(),this.sounds.resetGameOverMusicVolume(),this.sounds.resetGameEndMusicVolume()}healthBarColor(e){switch(e){case 3:return"green";case 2:return"yellow";default:return"red"}}getBackground(){const e=["Street-Fighter-background-Street-fighter-characters-.jpg","Mm6kmlz.gif","Blanka-Stage-Background-Bitmap-GIF-Without-Characters-from-Street-Fighter-Alpha-3-Arcade.gif","animated-gifs-of-fighting-game-backgrounds-51.gif","80f9d4af066c7c4245b80ffd41975f29.gif"];return e[Math.floor(Math.random()*e.length)]}getDrawImg(){const e=["knot0.png","tie0.png","tie1.png","tie2.gif"],o=Math.floor(Math.random()*e.length);console.log(e[o]),this.drawImgString=e[o]}playFight(){this.fightImgShowing=!0;let e=new Audio;e.src="../assets/sounds/321913__jrc-yt__fight.mp3",e.autoplay=!0,e.muted=!1,e.load(),e.play()}checkForWinner(){0===this.gameState.pLeft.health||0===this.gameState.pRight.health?this.gameOver(0===this.gameState.pLeft.health?this.gameState.pRight:this.gameState.pLeft):this.makeAllNotReady()}checkGameStarted(){!this.gameState.isStarted&&this.gameState.pLeft.ready&&this.gameState.pRight.ready&&(this.socketService.setIsStarted(this.gameState.gamePin,!0),this.playFight(),setTimeout(()=>{this.fightImgShowing=!1,this.makeAllNotReady()},2e3))}checkResult(){this.gameState.result&&(this.gameState.result.draw?(this.getDrawImg(),this.drawImgShowing=!0,this.sounds.playDrawSound(),setTimeout(()=>{this.drawImgShowing=!1,this.makeAllNotReady()},2e3)):(this.sounds.playHitSound(),setTimeout(()=>{this.checkForWinner()},2e3)),this.clearResult())}clearResult(){this.store.dispatch((0,k.ag)({result:null}))}makeReady(e){var o=this;return d(function*(){yield o.socketService.setSideToReady(o.gameState.gamePin,e)})()}makeNotReady(e){var o=this;return d(function*(){yield o.socketService.setSideToNotReady(o.gameState.gamePin,e)})()}makeAllNotReady(){this.socketService.setBothSidesNotReady(this.gameState.gamePin)}select(e,o){var i=this;return d(function*(){yield i.socketService.setPlayersSelection(i.gameState.gamePin,e,o)})()}gameOver(e){this.fatalityImgShowing=!0,this.sounds.stopFightMusic(),this.sounds.playGameOverMusic(),setTimeout(()=>{this.sounds.playGameEndMusic()},3e3),console.log(`${e.username} Wins!!`)}playMoveSelect(){this.sounds.playMoveSelectSound()}back(){this.navigation.back()}runChecks(){this.checkGameStarted(),this.checkResult()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.$),t.Y36(S.yh),t.Y36(p.gz),t.Y36(x.f),t.Y36(f.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game"]],decls:43,vars:39,consts:[["id","background","alt","image",3,"src"],["id","popUpImgContainer"],["id","fightImg","src","assets/images/178-1784143_photo-street-fighter-fight-png.png","alt",""],["id","drawImg","alt","",3,"src"],["id","fatalityImg","src","assets/images/fatality.gif","alt",""],["id","pLeft"],["id","pLeftInfo"],["src","","alt",""],[1,"username"],[1,"healthBar","left"],[4,"ngFor","ngForOf"],["id","pRight",1,""],["id","pRightInfo",1,"right"],[1,"healthBar","right"],["id","wrapper"],["id","inputAreaContainer"],["class","inputArea",4,"ngIf"],["class","inputArea right",4,"ngIf"],[1,"options"],["id","back",3,"click"],[1,"healthCell",3,"ngStyle"],[1,"inputArea"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["src","assets/images/b4d657e7ef262b88eb5f7ac021edda87.gif","alt","",1,"waitingRing"],[1,"inputArea","right"]],template:function(e,o){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t._UZ(3,"img",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"nav"),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.TgZ(9,"span",8),t._uU(10),t.ALo(11,"async"),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.YNc(13,A,3,5,"ng-container",10),t.ALo(14,"async"),t.qZA(),t.qZA(),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t._UZ(17,"img",7),t.TgZ(18,"span",8),t._uU(19),t.ALo(20,"async"),t.qZA(),t.qZA(),t.TgZ(21,"div",13),t.YNc(22,w,3,5,"ng-container",10),t.ALo(23,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",14),t.TgZ(25,"div",15),t.YNc(26,I,3,2,"div",16),t.ALo(27,"async"),t.ALo(28,"async"),t.YNc(29,R,2,0,"div",16),t.ALo(30,"async"),t.ALo(31,"async"),t.YNc(32,L,3,2,"div",17),t.ALo(33,"async"),t.ALo(34,"async"),t.YNc(35,N,2,0,"div",17),t.ALo(36,"async"),t.ALo(37,"async"),t.qZA(),t.qZA(),t.TgZ(38,"div",18),t.TgZ(39,"button",19),t.NdJ("click",function(){return o.back()}),t._uU(40,"Back"),t.qZA(),t._UZ(41,"app-volume-control"),t._UZ(42,"app-music-selector"),t.qZA()),2&e&&(t.MGl("src","assets/images/",o.backgroundString,"",t.LSH),t.xp6(2),t.Q6J("@inOut",o.fightImgShowing?"in":"out"),t.xp6(1),t.MGl("src","assets/images/",o.drawImgString,"",t.LSH),t.Q6J("@inOut",o.drawImgShowing?"in":"out"),t.xp6(1),t.Q6J("@inOut",o.fatalityImgShowing?"in":"out"),t.xp6(6),t.Oqu(t.lcZ(11,13,o.pLeft$).username),t.xp6(3),t.Q6J("ngForOf",t.DdM(37,Z).constructor(t.lcZ(14,15,o.pLeft$).health)),t.xp6(6),t.Oqu(t.lcZ(20,17,o.pRight$).username),t.xp6(3),t.Q6J("ngForOf",t.DdM(38,Z).constructor(t.lcZ(23,19,o.pRight$).health)),t.xp6(4),t.Q6J("ngIf",!t.lcZ(27,21,o.pLeft$).ready&&t.lcZ(28,23,o.pLeft$).username===o.gameState.activePlayerUsername),t.xp6(3),t.Q6J("ngIf",!t.lcZ(30,25,o.pLeft$).ready&&t.lcZ(31,27,o.pLeft$).username!==o.gameState.activePlayerUsername),t.xp6(3),t.Q6J("ngIf",!t.lcZ(33,29,o.pRight$).ready&&t.lcZ(34,31,o.pRight$).username===o.gameState.activePlayerUsername),t.xp6(3),t.Q6J("ngIf",!t.lcZ(36,33,o.pRight$).ready&&t.lcZ(37,35,o.pRight$).username!==o.gameState.activePlayerUsername))},directives:[m.sg,m.O5,b,T,m.PC],pipes:[m.Ov],styles:["#background[_ngcontent-%COMP%]{width:100%;height:100%;opacity:60%;position:absolute;z-index:-1000}#popUpImgContainer[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;display:flex;justify-content:center;align-items:center;z-index:-500}#fightImg[_ngcontent-%COMP%]{height:45%}#drawImg[_ngcontent-%COMP%]{height:45%}#fatalityImg[_ngcontent-%COMP%]{height:100%}nav[_ngcontent-%COMP%]{margin:5px 15px;display:flex;justify-content:space-between}.right[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-left:auto}.username[_ngcontent-%COMP%]{font-size:25px;color:#000;letter-spacing:.03em}.healthBar[_ngcontent-%COMP%]{display:flex;flex-direction:row}.healthCell[_ngcontent-%COMP%]{height:10px;width:80px;margin:0 2px;border:thin solid black;background-color:green}#wrapper[_ngcontent-%COMP%]{height:80%}#inputAreaContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}.inputArea[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:50%;border:2px solid black;height:inherit;background-color:#0000008a}.inputArea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:6vw;border-radius:10px;font-family:inherit;font-size:5vw;padding:0 10px;text-align:center;margin-bottom:15px;background-color:#fff}.inputArea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}.inputArea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(1.1)}.inputArea[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:35%;justify-content:space-between}.inputArea[_ngcontent-%COMP%]   .waitingRing[_ngcontent-%COMP%]{height:30%}#back[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;height:30px;border-radius:15px;border:solid 1px black;font-family:inherit;font-size:20px;padding:0 10px;text-align:center;margin-right:12px;margin-left:5px;background-color:#fff}#back[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}#back[_ngcontent-%COMP%]:active{transform:scale(1.1)}.options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:75%;margin-top:5px}"],data:{animation:[(0,c.X$)("inOut",[(0,c.SB)("in",(0,c.oB)({display:"block"})),(0,c.SB)("out",(0,c.oB)({height:"0px"})),(0,c.eR)("* => in",[(0,c.jt)("1s")]),(0,c.eR)("in => out",[(0,c.jt)("0.3s")])])]}}),n})();var J=a(5257);const q=[{path:"",component:F,resolve:{userState:(()=>{class n{constructor(e){this.store=e}resolve(e,o){return this.store.select(y.qL).pipe((0,J.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(q)],p.Bz]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,B]]}),n})()}}]);