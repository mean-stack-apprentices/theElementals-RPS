"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[846],{3846:(H,f,r)=>{r.r(f),r.d(f,{GameModule:()=>Q});var h=r(8583),p=r(3735);function _(i,a,e,n,o,s,l){try{var g=i[s](l),m=g.value}catch(u){return void e(u)}g.done?a(m):Promise.resolve(m).then(n,o)}function d(i){return function(){var a=this,e=arguments;return new Promise(function(n,o){var s=i.apply(a,e);function l(m){_(s,n,o,l,g,"next",m)}function g(m){_(s,n,o,l,g,"throw",m)}l(void 0)})}}var c=r(7238),v=r(7865),S=r(4355),Z=r(9456),t=r(7716),x=r(5383),y=r(4220);let R=(()=>{class i{constructor(){this.selctions=["rock","paper","scissors"]}computerSelection(){const e=Math.floor(3*Math.random());return console.log(this.selctions[e]),this.selctions[e]}findRoundWinner(e,n){if(e.optionSelction&&n.optionSelction){const o=e.optionSelction,s=n.optionSelction;return"rock"===o&&"rock"===s?"draw":"rock"===o&&"paper"===s?"pRight":"rock"===o&&"scissors"===s||"paper"===o&&"rock"===s?"pLeft":"paper"===o&&"paper"===s?"draw":"paper"===o&&"scissors"===s||"scissors"===o&&"rock"===s?"pRight":"scissors"===o&&"paper"===s?"pLeft":"scissors"===o&&"scissors"===s?"draw":(console.log("something went very wrong lol"),"something went very wrong lol")}return console.log("something went very wrong lol"),"something went very wrong lol"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=r(9565),C=r(5447);let M=(()=>{class i{constructor(e){this.sounds=e,this.volumeLevel=1,this.muteOption="Mute"}volumeUp(){this.sounds.volumeUp(),this.volumeLevel+=1}volumeDown(){this.sounds.volumeDown(),this.volumeLevel-=1}volumeMute(){this.sounds.volumeMute(),this.muteOption=this.sounds.isMuted?"Unmute":"Mute"}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-volume-control"]],decls:8,vars:2,consts:[[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.volumeDown()}),t._uU(1,"Volume Down"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return n.volumeUp()}),t._uU(3,"Volume Up"),t.qZA(),t.TgZ(4,"button",0),t.NdJ("click",function(){return n.volumeMute()}),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA()),2&e&&(t.xp6(5),t.Oqu(n.muteOption),t.xp6(2),t.hij("Volume: ",n.volumeLevel,""))},styles:["button[_ngcontent-%COMP%]{margin:0 5px}p[_ngcontent-%COMP%]{font-size:20px;background:#ffffff;width:75px}"]}),i})();const k=function(i){return{"background-color":i}};function b(i,a){if(1&i&&(t.ynx(0),t._UZ(1,"div",19),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(1,k,e.healthBarColor(e.gameState.pLeft.health)))}}function A(i,a){if(1&i&&(t.ynx(0),t._UZ(1,"div",19),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(1,k,e.healthBarColor(e.gameState.pRight.health)))}}function I(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).makeReady("pLeft")}),t._uU(1,"Ready For War?"),t.qZA()}}function P(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pLeft","rock")}),t._uU(2,"Rock"),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pLeft","paper")}),t._uU(4,"Paper"),t.qZA(),t.TgZ(5,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pLeft","scissors")}),t._uU(6,"Scissors"),t.qZA(),t.qZA()}}function U(i,a){if(1&i&&(t.TgZ(0,"div",20),t.YNc(1,I,2,0,"button",21),t.YNc(2,P,7,0,"div",22),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.gameState.isStarted),t.xp6(1),t.Q6J("ngIf",e.gameState.isStarted)}}function O(i,a){1&i&&(t.TgZ(0,"div",20),t._UZ(1,"img",24),t.qZA())}function G(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).makeReady("pRight")}),t._uU(1,"Ready For War?"),t.qZA()}}function L(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pRight","rock")}),t._uU(2,"Rock"),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pRight","paper")}),t._uU(4,"Paper"),t.qZA(),t.TgZ(5,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).select("pRight","scissors")}),t._uU(6,"Scissors"),t.qZA(),t.qZA()}}function J(i,a){if(1&i&&(t.TgZ(0,"div",25),t.YNc(1,G,2,0,"button",21),t.YNc(2,L,7,0,"div",22),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.gameState.isStarted),t.xp6(1),t.Q6J("ngIf",e.gameState.isStarted)}}function N(i,a){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"img",24),t.qZA())}const w=function(){return[]};let q=(()=>{class i{constructor(e,n,o,s,l,g){this.socketService=e,this.store=n,this.route=o,this.gameService=s,this.navigation=l,this.sounds=g,this.loggedInUsername=void 0,this.fightImgShowing=!1,this.drawImgString=null,this.drawImgShowing=!1,this.fatalityImgShowing=!1,this.vsComputer=!1,this.backgroundString=this.getBackground(),this.store.select(v.P4).subscribe(u=>this.loggedInUsername=null==u?void 0:u.username),this.store.select(Z.M).subscribe(u=>this.gameState=Object.assign({},u)),console.log(this.gameState),this.gameState.vsComputer&&(this.vsComputer=!0,this.gameState.pLeft=new S.J(this.loggedInUsername?this.loggedInUsername:this.socketService.guestUsername),this.gameState.activePlayerUsername=this.gameState.pLeft.username,this.gameState.pRight=new S.J("Computer"),this.gameState.pRight.ready=!0)}ngOnInit(){this.sounds.stopMenuMusic(),this.sounds.playFightMusic()}ngOnDestroy(){this.sounds.stopFightMusic()}healthBarColor(e){switch(e){case 3:return"green";case 2:return"yellow";default:return"red"}}getBackground(){const e=["Street-Fighter-background-Street-fighter-characters-.jpg","Mm6kmlz.gif","Blanka-Stage-Background-Bitmap-GIF-Without-Characters-from-Street-Fighter-Alpha-3-Arcade.gif","animated-gifs-of-fighting-game-backgrounds-51.gif","80f9d4af066c7c4245b80ffd41975f29.gif"];return e[Math.floor(Math.random()*e.length)]}getDrawImg(){const e=["knot0.png","tie0.png","tie1.png","tie2.gif"],n=Math.floor(Math.random()*e.length);console.log(e[n]),this.drawImgString=e[n]}playFight(){this.fightImgShowing=!0;let e=new Audio;e.src="../assets/sounds/321913__jrc-yt__fight.mp3",e.autoplay=!0,e.muted=!1,e.load(),e.play(),console.log("sound??")}checkPlayersReady(){if(!this.gameState.isStarted&&this.gameState.pLeft.ready&&this.gameState.pRight.ready)this.vsComputer?this.gameState.isStarted=!0:this.socketService.setIsStarted(this.gameState.gamePin,!0),this.playFight(),setTimeout(()=>{this.fightImgShowing=!1,this.makeAllNotReady()},2e3);else if(this.gameState.isStarted&&this.gameState.pLeft.ready&&this.gameState.pRight.ready)switch(this.gameService.findRoundWinner(this.gameState.pLeft,this.gameState.pRight)){case"draw":this.getDrawImg(),this.drawImgShowing=!0,console.log("twas a draw"),setTimeout(()=>{this.drawImgShowing=!1,this.makeAllNotReady()},2e3);break;case"pLeft":this.vsComputer?this.gameState.pRight.loseHealth():this.socketService.decreasePlayersHealth(this.gameState.gamePin,"pRight"),0===this.gameState.pRight.health?this.gameOver(this.gameState.pLeft):setTimeout(()=>{this.makeAllNotReady()},2e3);break;case"pRight":this.vsComputer?this.gameState.pLeft.loseHealth():this.socketService.decreasePlayersHealth(this.gameState.gamePin,"pLeft"),0===this.gameState.pLeft.health?this.gameOver(this.gameState.pRight):setTimeout(()=>{this.makeAllNotReady()},2e3)}}makeReady(e){var n=this;return d(function*(){n.vsComputer?(n.gameState[e].makeReady(),n.checkPlayersReady()):(yield n.socketService.setSideToReady(n.gameState.gamePin,e),setTimeout(()=>{n.checkPlayersReady()},2e3))})()}makeNotReady(e){var n=this;return d(function*(){yield n.socketService.setSideToNotReady(n.gameState.gamePin,e)})()}makeAllNotReady(){this.vsComputer?(this.gameState.pLeft.ready=!1,this.gameState.pRight.ready=!1,setTimeout(()=>{this.select("pRight",this.gameService.computerSelection())},2e3*Math.random()+2e3)):(this.makeNotReady("pLeft"),this.makeNotReady("pRight"))}select(e,n){var o=this;return d(function*(){o.vsComputer?(o.gameState[e].optionSelction=n,o.gameState[e].ready=!0,o.checkPlayersReady()):(yield o.socketService.setPlayersSelection(o.gameState.gamePin,e,n),yield o.makeReady(e),o.checkPlayersReady())})()}gameOver(e){this.fatalityImgShowing=!0;let n=new Audio;n.src="../assets/sounds/game-over-arcade.wav",n.autoplay=!0,n.muted=!1,n.load(),n.play(),console.log(`${e.username} Wins!!`)}back(){this.navigation.back()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.$),t.Y36(y.yh),t.Y36(p.gz),t.Y36(R),t.Y36(T.f),t.Y36(C.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-game"]],decls:29,vars:15,consts:[["id","background","alt","image",3,"src"],["id","popUpImgContainer"],["id","fightImg","src","assets/images/178-1784143_photo-street-fighter-fight-png.png","alt",""],["id","drawImg","alt","",3,"src"],["id","fatalityImg","src","assets/images/fatality.gif","alt",""],["id","pLeft"],["id","pLeftInfo"],["src","","alt",""],[1,"username"],[1,"healthBar","left"],[4,"ngFor","ngForOf"],["id","pRight",1,""],["id","pRightInfo",1,"right"],[1,"healthBar","right"],["id","wrapper"],["id","inputAreaContainer"],["class","inputArea",4,"ngIf"],["class","inputArea right",4,"ngIf"],["id","back",3,"click"],[1,"healthCell",3,"ngStyle"],[1,"inputArea"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["src","assets/images/b4d657e7ef262b88eb5f7ac021edda87.gif","alt","",1,"waitingRing"],[1,"inputArea","right"]],template:function(e,n){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t._UZ(3,"img",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"nav"),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.TgZ(9,"span",8),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"div",9),t.YNc(12,b,2,3,"ng-container",10),t.qZA(),t.qZA(),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t._UZ(15,"img",7),t.TgZ(16,"span",8),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"div",13),t.YNc(19,A,2,3,"ng-container",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",14),t.TgZ(21,"div",15),t.YNc(22,U,3,2,"div",16),t.YNc(23,O,2,0,"div",16),t.YNc(24,J,3,2,"div",17),t.YNc(25,N,2,0,"div",17),t.qZA(),t.qZA(),t.TgZ(26,"button",18),t.NdJ("click",function(){return n.back()}),t._uU(27,"Back"),t.qZA(),t._UZ(28,"app-volume-control")),2&e&&(t.MGl("src","assets/images/",n.backgroundString,"",t.LSH),t.xp6(2),t.Q6J("@inOut",n.fightImgShowing?"in":"out"),t.xp6(1),t.MGl("src","assets/images/",n.drawImgString,"",t.LSH),t.Q6J("@inOut",n.drawImgShowing?"in":"out"),t.xp6(1),t.Q6J("@inOut",n.fatalityImgShowing?"in":"out"),t.xp6(6),t.Oqu(n.gameState.pLeft.username),t.xp6(2),t.Q6J("ngForOf",t.DdM(13,w).constructor(n.gameState.pLeft.health)),t.xp6(5),t.Oqu(n.gameState.pRight.username),t.xp6(2),t.Q6J("ngForOf",t.DdM(14,w).constructor(n.gameState.pRight.health)),t.xp6(3),t.Q6J("ngIf",!n.gameState.pLeft.ready&&n.gameState.pLeft.username===n.gameState.activePlayerUsername),t.xp6(1),t.Q6J("ngIf",!n.gameState.pLeft.ready&&n.gameState.pLeft.username!==n.gameState.activePlayerUsername),t.xp6(1),t.Q6J("ngIf",!n.gameState.pRight.ready&&n.gameState.pRight.username===n.gameState.activePlayerUsername),t.xp6(1),t.Q6J("ngIf",!n.gameState.pRight.ready&&n.gameState.pRight.username!==n.gameState.activePlayerUsername))},directives:[h.sg,h.O5,M,h.PC],styles:["#background[_ngcontent-%COMP%]{width:100%;height:100%;opacity:60%;position:absolute;z-index:-1000}#popUpImgContainer[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;display:flex;justify-content:center;align-items:center;z-index:-500}#fightImg[_ngcontent-%COMP%]{height:45%}#drawImg[_ngcontent-%COMP%]{height:45%}#fatalityImg[_ngcontent-%COMP%]{height:100%}nav[_ngcontent-%COMP%]{margin:5px 15px;display:flex;justify-content:space-between}.right[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin-left:auto}.username[_ngcontent-%COMP%]{font-size:25px;font-family:monospace}.healthBar[_ngcontent-%COMP%]{display:flex;flex-direction:row}.healthCell[_ngcontent-%COMP%]{height:10px;width:80px;margin:0 2px;border:thin solid black;background-color:green}#wrapper[_ngcontent-%COMP%]{height:80%}#inputAreaContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}.inputArea[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:50%;border:2px solid black;height:inherit;background-color:#0000008a}.inputArea[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border-radius:10px;padding:0 10px}.inputArea[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:35%;justify-content:space-between}.inputArea[_ngcontent-%COMP%]   .waitingRing[_ngcontent-%COMP%]{height:30%}#back[_ngcontent-%COMP%]{width:75px;height:25px}"],data:{animation:[(0,c.X$)("inOut",[(0,c.SB)("in",(0,c.oB)({display:"block"})),(0,c.SB)("out",(0,c.oB)({height:"0px"})),(0,c.eR)("* => in",[(0,c.jt)("1s")]),(0,c.eR)("in => out",[(0,c.jt)("0.3s")])])]}}),i})();var F=r(5257);const B=[{path:"",component:q,resolve:{userState:(()=>{class i{constructor(e){this.store=e}resolve(e,n){return this.store.select(v.qL).pipe((0,F.q)(1))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(y.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}];let Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(B)],p.Bz]}),i})(),Q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.ez,Y]]}),i})()}}]);